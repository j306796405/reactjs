{"version":3,"sources":["gulpfile.js"],"names":[],"mappings":"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","file":"gulpfile-compiled.js","sourcesContent":["var path = require('path');\r\nvar gulp = require(\"gulp\");\r\nvar gutil = require(\"gulp-util\");\r\nvar fse = require('fs-extra');\r\nvar webpack = require(\"webpack\");\r\nvar WebpackDevServer = require(\"webpack-dev-server\");\r\nvar WebpackConfig = require(\"./webpack.config.js\");\r\n\r\n//dev\r\ngulp.task(\"build-dev\", [\"webpack:build-dev\", \"webpack-dev-server\"], function(){\r\n    gulp.watch([\"src/**/*\"], [\"webpack:build-dev\"]);\r\n});\r\n\r\n//webpack dev server\r\ngulp.task(\"webpack-dev-server\", function(callback) {\r\n    // Start a webpack-dev-server\r\n    var serverConfig = Object.create(WebpackConfig);\r\n        serverConfig.devtool = '#source-map';\r\n        serverConfig.debug = true;\r\n        serverConfig.entry.app.unshift(\"webpack-dev-server/client?http://localhost:8888\", \"webpack/hot/dev-server\");\r\n        serverConfig.plugins = serverConfig.plugins.concat(\r\n            new webpack.HotModuleReplacementPlugin()\r\n        )\r\n    var compiler = webpack(serverConfig);\r\n\r\n    new WebpackDevServer(compiler, {\r\n        contentBase: serverConfig.output.contentBase,\r\n        hot: true,\r\n        // 设置代理\r\n        // proxy: {\r\n        //     '/some/path*': {\r\n        //         target: 'https://other-server.example.com',\r\n        //     },\r\n        // },\r\n        stats: {\r\n            color: true\r\n        }\r\n    }).listen(8888, function(err) {\r\n        if(err) throw new gutil.PluginError(\"webpack-dev-server\", err);\r\n        // Server listening\r\n        gutil.log(\"[webpack-dev-server]\");\r\n\r\n        // keep the server alive or continue?\r\n        callback();\r\n    });\r\n});\r\n\r\ngulp.task(\"webpack:build-dev\", function(callback) {\r\n    //build dev\r\n    var devConfig = Object.create(WebpackConfig);\r\n        devConfig.devtool = 'sourcemap';\r\n        devConfig.debug = true;\r\n\r\n    var compiler = webpack(devConfig);\r\n    // run webpack\r\n    compiler.run(function(err, stats){\r\n        if(err) throw new gutil.PluginError(\"webpack\", err);\r\n        gutil.log(\"[webpack]\", stats.toString({\r\n            // output options\r\n            color: true\r\n        }));\r\n        fse.copySync('src/index.html', 'dist/index.html');\r\n        fse.copySync('src/page', 'dist/page');\r\n        callback();\r\n    });\r\n\r\n});\r\n\r\n//Production build\r\ngulp.task(\"build\", [\"webpack:build\"]);\r\n\r\ngulp.task(\"webpack:build\", function(callback) {\r\n\t// modify some webpack config options\r\n\tvar myConfig = Object.create(WebpackConfig);\r\n\tmyConfig.plugins = myConfig.plugins.concat(\r\n\t\tnew webpack.DefinePlugin({\r\n\t\t\t\"process.env\": {\r\n\t\t\t\t// This has effect on the react lib size\r\n\t\t\t\t\"NODE_ENV\": JSON.stringify(\"production\")\r\n\t\t\t}\r\n\t\t}),\r\n\t\tnew webpack.optimize.DedupePlugin(),\r\n\t\tnew webpack.optimize.UglifyJsPlugin()\r\n\t);\r\n\r\n  // remove www directory\r\n  fse.ensureDirSync('dist');\r\n  fse.emptyDirSync('dist');\r\n\r\n\t// run webpack\r\n\twebpack(myConfig, function(err, stats) {\r\n\t\tif(err) throw new gutil.PluginError(\"webpack:build\", err);\r\n\t\tgutil.log(\"[webpack:build]\", stats.toString({\r\n\t\t\tcolors: true\r\n\t\t}));\r\n\r\n    // copy files to dist directory\r\n    fse.copySync('src/index.html', 'dist/index.html');\r\n    fse.copySync('src/page', 'dist/page');\r\n\r\n\t\tcallback();\r\n\t});\r\n});\r\n"]}